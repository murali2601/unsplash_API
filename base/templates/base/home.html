<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% if query %}
    <title>Search for {{query}}</title>
    {% else %}
    <title>Unsplash API</title>
    {% endif %}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
<script src="https://kit.fontawesome.com/6a72a8e32d.js" crossorigin="anonymous"></script>
    
</head>
<style>
  body{
    background-color: rgb(232, 232, 232);
  }
  .background-container {
        position: relative;
        
        width: 100vw;
        height: 90vh;
        background-color: rgba(0, 0, 0, 0.254);
    }

    .background-container img {
        position: absolute;
        top: 0;
        left: 0;
        width: 100vw;
        height: 90vh;
        object-fit: cover; 
        z-index: -1;
    }
  .profile{
    border-radius: 50px;
  }

  form{
    position: absolute;
  top: 40%;
  left: 50%;
  transform: translate(-50%, -50%);
  }
  input{
    width: 50vw;
    border: none;
    padding: 10px;
    outline: none;
  }
  @media only screen and (max-width:480px){
    input{
      width:90vw;
    }
  }
input:focus{
    outline: none;
}
  input::placeholder{
    text-align: center;
  }
  #backToTopButton {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: #000000;
        color: #fff;
        border: none;
        padding: 10px 20px;
        cursor: pointer;
    }
 
</style>
<body>
  <div class="background-container">
    {% for r in results  %}
    {% if forloop.counter == 1 %}
    <img src="{{r.urls.full}}" alt="Background Image">
    {% endif %}
    {% endfor %}


    {% for d in data  %}
    {% if forloop.counter == 1 %}
    <img src="{{d.urls.full}}" alt="Background Image">
    {% endif %}
    {% endfor %}

    <button class="btn m-4 p-3 text-white fs-6" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasExample" aria-controls="offcanvasExample">
      <i class="fa-solid fa-filter fa-xl" style="color: #ffffff;"></i>&nbsp;&nbsp; Categories
    </button>
    <!----Home Button--->
    <a href="{% url 'home' %}" class="btn text-white"><i class="fa-solid fa-house fa-xl" style="color: #ffffff;"></i>&nbsp;&nbsp; Home</a>
    
    <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasExampleLabel">Popular Category</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button> 
      </div>
      <div class="offcanvas-body">
       <a href="{% url 'home' %}"><button class="btn bg-dark m-2 text-white  rounded-1 fs-5" ><i class="fa-solid fa-house"></i>&nbsp; Home</button></a>  
       <br>
       <br>
        <div>
          <li class="list-group-item"><a href="/Action" class="btn fs-5">&nbsp;&nbsp; Action</a></li>
          <li class="list-group-item"><a href="/Adventure" class="btn fs-5">&nbsp;&nbsp; Adventure</a></li>
          <li class="list-group-item"><a href="/Animal" class="btn fs-5">&nbsp;&nbsp; Animal</a></li>
          <li class="list-group-item"><a href="/Black&white" class="btn fs-5">&nbsp;&nbsp; Black&white</a></li>
          <li class="list-group-item"><a href="/City" class="btn fs-5">&nbsp;&nbsp; City</a></li>
          <li class="list-group-item"><a href="/Digital" class="btn fs-5">&nbsp;&nbsp; Digital</a></li>
          <li class="list-group-item"><a href="/Entertainment" class="btn fs-5">&nbsp;&nbsp; Entertainment</a></li>
          <li class="list-group-item"><a href="/Forest" class="btn fs-5">&nbsp;&nbsp; Forest</a></li>
          <li class="list-group-item"><a href="/Gaming" class="btn fs-5">&nbsp;&nbsp; Gaming</a></li>
          <li class="list-group-item"><a href="/Internet" class="btn fs-5">&nbsp;&nbsp; Internet</a></li>
          <li class="list-group-item"><a href="/Job" class="btn fs-5">&nbsp;&nbsp; Job</a></li>
          <li class="list-group-item"><a href="/Lights" class="btn fs-5">&nbsp;&nbsp; Lights</a></li>
          <li class="list-group-item"><a href="/Mountains" class="btn fs-5">&nbsp;&nbsp; Mountains</a></li>
          <li class="list-group-item"><a href="/Nature" class="btn fs-5">&nbsp;&nbsp; Nature</a></li>
          <li class="list-group-item"><a href="/Programming" class="btn fs-5">&nbsp;&nbsp; Programming</a></li>
          <li class="list-group-item"><a href="/Racing" class="btn fs-5">&nbsp;&nbsp; Racing</a></li>
          <li class="list-group-item"><a href="/Sports" class="btn fs-5">&nbsp;&nbsp; Sports</a></li>
          <li class="list-group-item"><a href="/Travel" class="btn fs-5">&nbsp;&nbsp; Travel</a></li>
          <li class="list-group-item"><a href="/Universe" class="btn fs-5">&nbsp;&nbsp; Universe</a></li>
          <li class="list-group-item"><a href="/Virtual Reality " class="btn fs-5">&nbsp;&nbsp; Virtual Reality</a></li>
          </div>
       
      </div>
     
    </div>
   
    <form action="" method="get">
    <h1 class="text-center text-white" style="font-size: 3.5em;">Infinite Photography Site</h1> <br> <br>
      <input type="text" name="query" placeholder="Search your queries here and press ENTER ..."> <br>
      <br>
      <br>
      {% if query %}
      <h2 class="text-center text-white" style="font-weight: 400;">Your Search Topic : <strong>{{query}}</strong></h2>
      {% endif %}
     </form>
     <h6 class="text-white text-center m-5" style="position: absolute;bottom: 2%;right: 2%;">Made with Unsplash API</h6>
</div>


  <h4 class="text-center m-3 p-3 ">Recently Uploaded</h4>
  
  <div class="row row-cols-1 mx-4 row-cols-md-4 g-4">
    {% for d in data %}
    <div class="col">
      <div class="card h-100">
        <a href="{% url 'view' d.id %}"><img src="{{d.urls.small}}" class="card-img-top rounded-0" alt="..."></a>
        <div class="card-body">
          <img src="{{d.user.profile_image.small}}" class="profile" alt=""> &nbsp; <span><strong>{{d.user.username}}</strong></span> <span style="float: right;">{{d.likes}}&nbsp; <i class="fa-solid fa-thumbs-up"></i></span>
         <br>
         {% if d.description != None %}
            <p class="card-text p-2">{{d.description}}</p>
         {% else %}
         <p class="card-text p-2">No description by {{d.user.username}}</p>
         {% endif %}
            <p class="card-text">Posted on {{d.created_at}}</p>
            
            <a href="{% url 'view' d.id %}" class="btn btn-dark rounded-1">View</a>
        </div>
      </div>
    </div>
    {% endfor %}


    {% for r in results %}
    <div class="col">
      <div class="card h-100">
        <a href="{% url 'view' r.id %}"><img src="{{r.urls.small}}" class="card-img-top rounded-0" alt="..."></a>
        <div class="card-body">
          <img src="{{r.user.profile_image.small}}" class="profile" alt=""> &nbsp; <span><strong>{{r.user.username}}</strong></span> <span style="float: right;">{{r.likes}}&nbsp; <i class="fa-solid fa-thumbs-up"></i></span>
          {% if r.description != None %}
          <p class="card-text p-2">{{r.description}}</p>
       {% else %}
       <p class="card-text p-2">No description by {{r.user.username}}</p>
       {% endif %}
          <p class="card-text">Posted on {{r.created_at}}</p>
            
            <a href="{% url 'view' r.id %}" class="btn btn-dark rounded-1">View</a>
        </div>
      </div>
    </div>
    {% empty %}

    <div class="card p-4">
      <h1 class=" p-4">No results found for <strong> " {{query}} " </strong></h1>
    </div>
   
    {% endfor %}
  </div>
  <button id="backToTopButton" class="rounded-1" onclick="scrollToTop()"><i class="fa-solid fa-arrow-up" style="color: #ffffff;"></i> &nbsp; Back to Top</button>

  <script>
    function scrollToTop() {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    }
</script>

     
    
</body>
</html>